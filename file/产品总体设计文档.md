# AI智能教学实训智能体系统 - 产品总体设计文档

## 1. 项目概述

### 1.1 赛题背景与实现目标

#### 1.1.1 赛题背景
国家大力推进教育数字化战略，传统教学模式在规模化、个性化层面存在短板。本赛题聚焦大模型与实训教学深度融合，推动教育数字化从理论到规模化实践，支撑高素质应用型人才培养。

当前高校实训教学普遍存在以下痛点：
1. **教师备课效率低**：需手动备课与设计题目，收集课程资源与课程匹配梳理耗时且难以覆盖多样化需求
2. **学生缺乏实时指导**：课后无法随时与教师沟通互动，无实时练习指导
3. **批改工作繁重**：教师手动批改效率低，缺乏自动化评估工具
4. **个性化学习不足**：学生缺乏针对性的学习指导和练习推荐

#### 1.1.2 实现目标
本赛题旨在开发一个基于开源大模型的教学实训智能体软件，实现以下目标：
- **教师端**：帮助教师生成课前备课设计、课后检测问答，提升效率与效果
- **学生端**：提供学生全时在线练习与指导，实现教学相长
- **管理端**：提供学情数据分析与可视化，支持教学决策

#### 1.1.3 实用价值
- 解决传统实训教学中教师手动设计任务、批改效率低、学生缺乏针对性指导等问题
- 推动实训教学向智能化、自适应化转型
- 降低教学成本，提升学习效果
- 实现教育资源高效利用

### 1.2 技术架构
系统采用前后端分离的微服务架构：
- **前端**：Vue 3 + TypeScript + Quasar Framework + Element Plus + Tailwind CSS
- **后端**：Spring Boot + MyBatis + MySQL
- **AI微服务**：FastAPI + Python + FAISS向量数据库
- **文件存储**：阿里云OSS
- **核心AI模型**：基于开源大模型技术，支持本地部署

## 2. AI模型架构设计

### 2.1 核心AI模型

#### 2.1.1 大语言模型（LLM）
- **模型选择**：DeepSeek Chat（开源大模型）
- **部署方式**：支持本地部署和API调用
- **模型特点**：对中文友好，支持代码生成和自然语言理解
- **主要用途**：
  - 教学内容生成
  - 练习题生成
  - 主观题评估
  - 在线学习助手
  - 学情分析

#### 2.1.2 文本嵌入模型（Embedding）
- **模型选择**：Qwen Text-Embedding-V4（国产模型）
- **API接口**：https://dashscope.aliyuncs.com/compatible-mode/v1
- **向量维度**：1536维
- **主要用途**：文档向量化，支持语义检索

#### 2.1.3 向量数据库
- **技术选择**：FAISS (Facebook AI Similarity Search)
- **索引类型**：IndexFlatL2（L2距离）
- **主要用途**：存储和检索文档向量，支持相似度搜索
- **知识库容量**：支持100M以内的本地知识库资料

### 2.2 RAG（检索增强生成）架构

#### 2.2.1 知识库构建流程
```
文档上传 → 文档解析 → 文本分块 → 向量化 → 存储到FAISS
```

#### 2.2.2 检索增强生成流程
```
用户查询 → 向量化查询 → 检索相关文档 → 构建提示词 → LLM生成 → 返回结果
```

## 3. 核心功能模块

### 3.1 教师端功能模块

#### 3.1.1 备课与设计模块
**功能描述**：根据所提供的本地课程大纲、课程知识库文档等自动设计教学内容，包括知识讲解、实训练习与指导、时间分布等。

**技术实现**：
```python
# 核心API调用
POST /rag/generate
{
    "course_name": "嵌入式Linux开发",
    "course_outline": "课程大纲内容",
    "expected_hours": 16
}
```

**模型优化**：
- **提示词工程**：精心设计的提示词模板，确保生成内容的结构化和实用性
- **知识检索**：基于FAISS的语义检索，确保生成内容与知识库一致
- **JSON解析**：智能JSON解析机制，处理大模型返回的复杂结构
- **知识点关联性验证**：确保生成内容与本地知识库的关联性和准确性

#### 3.1.2 考核内容生成模块
**功能描述**：根据教学内容自动生成考核题目及参考答案，考核题目种类可多样化，根据学科设计，如计算机类可设计相关编程题和答案。

**技术实现**：
```python
# 核心API调用
POST /rag/generate_exercise
{
    "course_name": "嵌入式Linux开发",
    "lesson_content": "课时内容",
    "difficulty": "medium",
    "choose_count": 5,
    "fill_blank_count": 5,
    "question_count": 2,
    "custom_types": {"program": 3}  # 编程题
}
```

**模型优化**：
- **题型控制**：通过提示词精确控制生成题目的类型和数量
- **难度调节**：支持easy/medium/hard三种难度级别
- **知识点关联**：自动关联相关知识点，提高题目质量
- **编程题支持**：针对计算机类专业，支持代码生成和评估

#### 3.1.3 学情数据分析模块
**功能描述**：对学生提交的答案进行自动化检测，提供错误定位与修正建议。对学生整体数据进行分析，总结知识掌握情况与教学建议。

**技术实现**：
```python
# 主观题评估API
POST /rag/evaluate_subjective
{
    "question": "题目内容",
    "student_answer": "学生答案",
    "reference_answer": "参考答案",
    "max_score": 10.0
}

# 练习分析API
POST /rag/analyze_exercise
{
    "exercise_questions": [
        {
            "content": "题目内容",
            "error_rate": 0.3,
            "type": "singlechoice",
            "score": 8.0,
            "student_count": 50,
            "correct_count": 35
        }
    ]
}
```

### 3.2 学生端功能模块

#### 3.2.1 在线学习助手模块
**功能描述**：对学生的提出的问题，结合教学内容进行解答，提供全时在线学习支持。

**技术实现**：
```python
# 核心API调用
POST /rag/assistant
{
    "question": "学生问题",
    "course_name": "嵌入式Linux开发",
    "chat_history": [{"role": "user", "content": "历史对话"}]
}
```

**模型优化**：
- **上下文感知**：支持多轮对话，保持对话连贯性
- **知识检索**：基于问题检索相关知识，提供准确回答
- **个性化推荐**：根据学习历史推荐相关练习

#### 3.2.2 实时练习评测助手模块
**功能描述**：根据学生历史练习情况，以及学生的练习要求，生成随练题目，并对练习纠错。

**技术实现**：
```python
# 个性化练习生成API
POST /rag/generate_student_exercise
{
    "requirements": "题目要求",
    "knowledge_preferences": "知识点偏好",
    "wrong_questions": [{"question": "错题", "answer": "答案"}]
}
```

**模型优化**：
- **个性化推荐**：基于学生历史练习情况生成针对性题目
- **错题分析**：分析学生错题模式，生成相关练习
- **实时反馈**：提供即时的练习纠错和指导建议

### 3.3 管理端功能模块

#### 3.3.1 用户管理模块
**功能描述**：管理员/教师/学生等用户的基本管理，包括用户注册、登录、权限管理等。

**技术实现**：
- 基于Spring Boot的用户认证和授权系统
- 支持角色权限管理（管理员/教师/学生）
- 用户信息管理和统计

#### 3.3.2 课件资源管理模块
**功能描述**：按学科列表教师备课产生的课件、练习等资源，可以导出。

**技术实现**：
- 支持多种格式课件上传和管理
- 按学科分类存储和检索
- 支持资源导出功能
- 基于阿里云OSS的文件存储

#### 3.3.3 大屏概览模块
**功能描述**：提供教学效率指数和学生学习效果的可视化分析。

**核心指标**：
1. **教师使用统计**：
   - 教师使用次数统计/活跃板块(当日/本周)
   - 备课与修正耗时统计
   - 课后练习设计与修正耗时统计

2. **学生使用统计**：
   - 学生使用次数统计/活跃板块(当日/本周)
   - 平均正确率趋势分析
   - 知识点掌握情况统计

3. **教学效率分析**：
   - 教学效率指数计算
   - 课程优化方向推荐（如：某学科通过率持续偏低）
   - 高频错误知识点识别

4. **学习效果分析**：
   - 学生学习效果趋势
   - 知识点掌握情况热力图
   - 个性化学习建议生成

## 4. API接口设计

### 4.1 知识库管理接口

#### 4.1.1 文档上传
```http
POST /embedding/upload
Content-Type: multipart/form-data

file: <文件>
course_id: <课程ID>
```

**功能**：上传本地知识库资料（如《嵌入式Linux开发实践教程》课件资料），自动解析并添加到知识库

**支持格式**：PDF、Word、TXT、Markdown、JSON、CSV、Excel、HTML等

**知识库容量限制**：总量不大于100M

### 4.2 教学内容生成接口

#### 4.2.1 基础内容生成
```http
POST /rag/generate
Content-Type: application/json

{
    "course_name": "课程名称",
    "course_outline": "课程大纲",
    "expected_hours": 16
}
```

#### 4.2.2 详细内容生成
```http
POST /rag/detail
Content-Type: application/json

{
    "title": "课时标题",
    "knowledgePoints": ["知识点1", "知识点2"],
    "practiceContent": "练习内容",
    "teachingGuidance": "教学指导",
    "timePlan": [
        {"step": "导入", "minutes": 5, "content": "导入内容"}
    ]
}
```

### 4.3 练习生成接口

#### 4.3.1 教师练习生成
```http
POST /rag/generate_exercise
Content-Type: application/json

{
    "course_name": "课程名称",
    "lesson_content": "课时内容",
    "difficulty": "medium",
    "choose_count": 5,
    "fill_blank_count": 5,
    "question_count": 2
}
```

#### 4.3.2 学生个性化练习
```http
POST /rag/generate_student_exercise
Content-Type: application/json

{
    "requirements": "题目要求",
    "knowledge_preferences": "知识点偏好",
    "wrong_questions": [{"question": "错题", "answer": "答案"}]
}
```

### 4.4 评估分析接口

#### 4.4.1 主观题评估
```http
POST /rag/evaluate_subjective
Content-Type: application/json

{
    "question": "题目",
    "student_answer": "学生答案",
    "reference_answer": "参考答案",
    "max_score": 10.0
}
```

#### 4.4.2 练习分析
```http
POST /rag/analyze_exercise
Content-Type: application/json

{
    "exercise_questions": [
        {
            "content": "题目内容",
            "error_rate": 0.3,
            "type": "singlechoice",
            "score": 8.0,
            "student_count": 50,
            "correct_count": 35
        }
    ]
}
```

## 5. 模型优化策略

### 5.1 开源大模型集成优化

#### 5.1.1 模型选择策略
- **国产模型优先**：优先使用对中文友好的国产开源大模型
- **本地部署支持**：支持模型本地部署，降低API调用成本
- **模型微调能力**：支持基于本地知识库的模型微调，提升专业性

#### 5.1.2 提示词工程优化
- **结构化提示词**：采用JSON格式输出，确保返回结果的结构化
- **角色定义**：详细的角色定义和任务说明，如"作为一名经验丰富的教育专家"
- **上下文增强**：集成知识库检索结果，支持多轮对话历史

### 5.2 本地知识库应用优化

#### 5.2.1 知识库构建策略
- **文档分块优化**：根据文档类型和内容结构，采用合适的分块策略
- **向量检索优化**：使用L2距离进行相似度计算，支持top-k检索
- **关联性验证**：确保生成内容与本地知识库的关联性和准确性

#### 5.2.2 知识库管理
- **增量更新**：支持知识库的增量更新，无需重新构建整个索引
- **容量控制**：严格控制知识库容量在100M以内
- **质量保证**：对上传的文档进行质量检查和预处理

### 5.3 模型微调创新性

#### 5.3.1 领域适应微调
- **教育领域微调**：基于教育场景的特定数据进行模型微调
- **学科专业化**：针对不同学科（如计算机、嵌入式等）进行专业化微调
- **任务特定优化**：针对备课、出题、评估等特定任务进行优化

#### 5.3.2 错误处理优化
```python
def safe_json_loads(self, text):
    """智能JSON解析，支持容错处理"""
    try:
        return json.loads(text)
    except Exception:
        # 正则表达式提取JSON对象
        match = re.search(r'(\{[\s\S]*\})', text)
        if match:
            return json.loads(match.group(1))
        raise ValueError("JSON解析失败")
```

#### 5.3.3 错误处理与日志
- 异常捕获和日志记录
- 结构化错误响应
- 详细的错误信息追踪

## 6. 部署和运维

### 6.1 开发环境与实现条件

#### 6.1.1 开发环境
- **开发语言**：Python 3.8+, Java 8+, TypeScript
- **开发工具**：IDE不限，推荐PyCharm、IntelliJ IDEA、VS Code
- **版本控制**：Git
- **容器化**：Docker（可选）

#### 6.1.2 硬件要求
- **CPU**：4核心以上
- **内存**：8GB以上
- **存储**：50GB以上可用空间
- **网络**：支持互联网访问（用于API调用）

#### 6.1.3 环境变量配置
```bash
# AI模型配置
DEEPSEEK_API_KEY=your_deepseek_api_key
DASHSCOPE_API_KEY=your_dashscope_api_key
QWEN_EMBEDDING_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
QWEN_EMBEDDING_MODEL=text-embedding-v4
QWEN_EMBEDDING_DIM=1536

# 文件存储配置
ALIYUN_ACCESS_KEY_ID=your_access_key_id
ALIYUN_ACCESS_KEY_SECRET=your_access_key_secret
ALIYUN_OSS_BUCKET=your_bucket_name
ALIYUN_OSS_ENDPOINT=your_endpoint

# 数据库配置
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=ai_class_helper
MYSQL_USERNAME=root
MYSQL_PASSWORD=your_password
```

#### 6.1.4 依赖管理
```python
# requirements.txt
fastapi==0.104.1
uvicorn==0.24.0
openai
faiss-cpu
numpy<2
python-dotenv==1.0.0
pandas
scikit-learn
loguru==0.7.2
tenacity==8.2.3
```

### 6.2 性能优化

#### 6.2.1 并发处理
- 使用FastAPI的异步特性
- 支持多进程部署
- 连接池管理

#### 6.2.2 缓存策略
- 向量检索结果缓存
- 大模型响应缓存
- 静态资源缓存

### 6.3 监控和日志

#### 6.3.1 日志系统
- 结构化日志记录
- 分级日志管理
- 日志轮转和归档

#### 6.3.2 健康检查
```http
GET /health
```

## 7. 测试数据与验证

### 7.1 测试数据
- **主要测试数据**：《嵌入式Linux开发实践教程》课件资料
- **数据获取**：通过赛题答疑QQ群（947755014）获取相关资料
- **数据使用**：选择其中部分章节进行训练验证



## 8. 安全考虑

### 8.1 API安全
- API密钥管理
- 请求频率限制
- 输入验证和过滤

### 8.2 数据安全
- 敏感数据加密
- 访问权限控制
- 数据备份策略

## 9. 总结

AI智能教学实训智能体系统通过集成开源大模型和RAG技术，为教育场景提供了全方位的AI支持。系统具备以下核心优势：

1. **符合赛题要求**：基于开源大模型技术，支持本地部署，对中文友好
2. **功能覆盖全面**：涵盖教师备课、学生练习、管理分析等全流程
3. **技术架构先进**：采用微服务架构，支持高并发和可扩展
4. **教育实用性高**：针对实训教学痛点，提供智能化解决方案
5. **创新性突出**：在模型微调、知识库应用等方面具有创新性

通过本系统的应用，能够显著提升教学效率，改善学习体验，推动教育数字化转型，符合国家教育数字化战略的发展方向。 